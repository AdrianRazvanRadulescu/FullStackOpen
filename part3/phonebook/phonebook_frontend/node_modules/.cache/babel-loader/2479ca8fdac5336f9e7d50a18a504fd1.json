{"ast":null,"code":"import _objectSpread from\"C:/Users/adria/Desktop/FullStackOpen/part3/phonebook/phonebook_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/adria/Desktop/FullStackOpen/part3/phonebook/phonebook_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import Form from\"./components/Form\";import Filter from\"./components/Filter\";import PersonsList from\"./components/PersonsList\";import Notification from\"./components/Notification\";import axios from\"axios\";import personService from\"./services/persons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filterName=_useState8[0],setNewFilterName=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){axios.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNumber,id:persons.length+1};var personFound=persons.find(function(person){return person.name===personObject.name;});if(personFound!==undefined){var willUpdate=window.confirm(\"\".concat(personFound.name,\" is already in the phonebook. Replace the old number?\"));if(willUpdate){var updatedPerson=_objectSpread(_objectSpread({},personFound),{},{number:newNumber});console.log(updatedPerson);personService.update(personFound.id,updatedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return personFound.id!==person.id?person:returnedPerson;}));setMessage(\"Changed \".concat(returnedPerson.name,\"'s number.\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setPersons(persons.filter(function(person){return person.id!==updatedPerson.id;}));setMessage(\"[ERROR] \".concat(updatedPerson.name,\" was already deleted from server\"));setTimeout(function(){setMessage(null);},5000);});}}else{personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setMessage(\"Added \".concat(returnedPerson.name,\" to the list.\"));setTimeout(function(){setMessage(null);},5000);});}setNewName(\"\");setNewNumber(\"\");};var deletePerson=function deletePerson(id){var personToDelete=persons.filter(function(person){return person.id===id;});var personName=personToDelete[0].name;if(window.confirm(\"Delete the person \".concat(personName,\"?\")))personService.remove(id).then(function(){return setPersons(persons.filter(function(person){return person.id!==id;}));}).catch(function(error){setPersons(persons.filter(function(person){return person.id!==personToDelete[0].id;}));setMessage(\"[ERROR] \".concat(personToDelete[0].name,\" was already deleted from server\"));setTimeout(function(){setMessage(null);},5000);});};var handleNameChange=function handleNameChange(event){console.log(event.target.value);setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){console.log(event.target.value);setNewNumber(event.target.value);};var handleFilterName=function handleFilterName(event){console.log(event.target.value);setNewFilterName(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filterName:filterName,handleFilterName:handleFilterName}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new\"}),/*#__PURE__*/_jsx(Form,{addPerson:addPerson,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(PersonsList,{persons:persons,filterName:filterName,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["useEffect","useState","Form","Filter","PersonsList","Notification","axios","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterName","setNewFilterName","message","setMessage","getAll","then","initialPersons","addPerson","event","preventDefault","personObject","name","number","id","length","personFound","find","person","undefined","willUpdate","window","confirm","updatedPerson","console","log","update","returnedPerson","map","setTimeout","catch","error","filter","create","concat","deletePerson","personToDelete","personName","remove","handleNameChange","target","value","handleNumberChange","handleFilterName"],"sources":["C:/Users/adria/Desktop/FullStackOpen/part3/phonebook/phonebook_frontend/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Form from \"./components/Form\";\nimport Filter from \"./components/Filter\";\nimport PersonsList from \"./components/PersonsList\";\nimport Notification from \"./components/Notification\";\nimport axios from \"axios\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterName, setNewFilterName] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    axios.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length + 1,\n    };\n\n    const personFound = persons.find(\n      (person) => person.name === personObject.name\n    );\n\n    if (personFound !== undefined) {\n      const willUpdate = window.confirm(\n        `${personFound.name} is already in the phonebook. Replace the old number?`\n      );\n\n      if (willUpdate) {\n        const updatedPerson = { ...personFound, number: newNumber };\n        console.log(updatedPerson);\n\n        personService\n          .update(personFound.id, updatedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                personFound.id !== person.id ? person : returnedPerson\n              )\n            );\n            setMessage(`Changed ${returnedPerson.name}'s number.`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            setPersons(\n              persons.filter((person) => person.id !== updatedPerson.id)\n            );\n            setMessage(\n              `[ERROR] ${updatedPerson.name} was already deleted from server`\n            );\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      personService.create(personObject).then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setMessage(`Added ${returnedPerson.name} to the list.`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const deletePerson = (id) => {\n    const personToDelete = persons.filter((person) => person.id === id);\n    const personName = personToDelete[0].name;\n\n    if (window.confirm(`Delete the person ${personName}?`))\n      personService\n        .remove(id)\n        .then(() => setPersons(persons.filter((person) => person.id !== id)))\n        .catch((error) => {\n          setPersons(\n            persons.filter((person) => person.id !== personToDelete[0].id)\n          );\n          setMessage(\n            `[ERROR] ${personToDelete[0].name} was already deleted from server`\n          );\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n  };\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterName = (event) => {\n    console.log(event.target.value);\n    setNewFilterName(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filterName={filterName} handleFilterName={handleFilterName} />\n\n      <h3>add a new</h3>\n      <Form\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h3>Numbers</h3>\n      <PersonsList\n        persons={persons}\n        filterName={filterName}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}